<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.2.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@holoviz/panel@0.13.0/dist/panel.min.js"></script>
    <script type="text/javascript">
          Bokeh.set_log_level("info");
    </script>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>
<body>
    <h1>This is demo of pyscript</h1>
    <input type="file" id="files" class="form-control form-control-sm">
     <py-config>
        packages = ["numpy","pandas"]
      </py-config>
      <py-script>
      from js import console, document ,Object, window
      from pyodide.ffi import create_proxy,JsProxy ,to_js
      import datetime
      import time

      reader = js.FileReader.new()
      reader.onload = lambda e: print(e.target.result)  

      def Cal(event):
        files = event.target.files
        reader.readAsText(files.item(0), 'utf-8')
        time1 = time(8,00)
        time2 = time(9,00)
        console.log(time1-time2)          
          
      fileInput = document.getElementById("files")
      fileInput.addEventListener("change",create_proxy(Cal),False)
      </py-script>
<script>
  var reader = new FileReader();

  reader.onload = function(event) {
    var data = event.target.result;
    return data
    }


function uploadFile() {
  var input = document.getElementById("files");
  var file = input.files[0];
  reader.readAsText(file);
}
</script>
</body>
</html>